<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <title>豆瓣电影数据分析</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body data-page="analysis">
<a href="index.html" class="back">👈返回首页</a>
<h1>豆瓣电影数据分析</h1>

<div class="filter-row">
    <label for="filter-preset">快捷筛选</label>
    <select id="filter-preset" title="快捷筛选">
        <option value="this-year">今年</option>
        <option value="this-month">本月</option>
        <option value="last-3-months">近 3 个月</option>
        <option value="last-year">去年</option>
        <option value="custom">自定义</option>
        <option value="all">全部</option>
    </select>

    <label for="filter-year">年份</label>
    <select id="filter-year" title="按年份筛选"></select>

    <label for="filter-month">月份</label>
    <select id="filter-month" title="按月份筛选">
        <option value="">全部</option>
        <option value="01">01</option><option value="02">02</option><option value="03">03</option>
        <option value="04">04</option><option value="05">05</option><option value="06">06</option>
        <option value="07">07</option><option value="08">08</option><option value="09">09</option>
        <option value="10">10</option><option value="11">11</option><option value="12">12</option>
    </select>

    <label for="filter-start">更新时间 ≥</label>
    <input id="filter-start" type="date" />
    <label for="filter-end">更新时间 ≤</label>
    <input id="filter-end" type="date" />
</div>

<div class="summary" id="summary-cards"></div>

<section class="flex">
    <div class="list">
        <h3>热门类型 Top5</h3>
        <ul id="genre-list"></ul>
    </div>
    <div class="list">
        <h3>主要语言 Top5</h3>
        <ul id="language-list"></ul>
    </div>
    <div class="list">
        <h3>评分分布</h3>
        <ul id="rating-list"></ul>
    </div>
</section>

<section>
    <div class="flex">
        <div class="list">
            <h3>月度趋势</h3>
            <ul id="monthly-trend"></ul>
        </div>
        <div class="list" id="yearly-compare-block">
            <h3>年度对比</h3>
            <ul id="yearly-compare"></ul>
        </div>
        <div class="list">
            <h3>年代偏好</h3>
            <ul id="decade-summary"></ul>
        </div>
    </div>
</section>

<section>
    <div class="flex">
        <div class="list">
            <div class="creator-tabs" role="tablist" aria-label="创作者角色切换">
                <button data-role="directors" class="active" role="tab" aria-selected="true">导演</button>
                <button data-role="writers" role="tab" aria-selected="false">编剧</button>
                <button data-role="actors" role="tab" aria-selected="false">演员</button>
            </div>
            <!-- 改为：页签 + 表格 -->
            <div class="creator-panel">

                <table id="creator-table" class="creator-table">
                    <thead>
                    <tr>
                        <th>名称</th>
                        <th>角色</th>
                        <th>观影次数</th>
                        <th>平均评分</th>
                    </tr>
                    </thead>
                    <tbody id="creator-table-body"></tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="flex">
        <div class="list">
            <h3>评分直方图</h3>
            <!-- 改为柱形图容器 -->
            <div id="rating-histogram-chart" class="chart-histogram" aria-hidden="false"></div>
        </div>
        <div class="list">
            <h3>地区偏好</h3>
            <div id="region-bar-chart" class="chart-column"></div>
            <!--            <ul id="region-list-extended"></ul>-->
        </div>
        <div class="list">
            <h3>语言偏好</h3>
            <div id="language-donut-chart" class="chart-donut"></div>
            <!--            <ul id="language-list-extended"></ul>-->
        </div>
    </div>
</section>

<section>
    <h3>综合关联分析</h3>
    <table>
        <thead>
        <tr>
            <th>特征组合（类型 × 地区 × 年代）</th>
            <th>部数</th>
            <th>平均评分</th>
        </tr>
        </thead>
        <tbody id="correlation-table-body"></tbody>
    </table>
</section>

<section>
    <div class="flex">
        <div class="list">
            <h3>单类型观察</h3>
            <ul id="genre-pref"></ul>
        </div>
        <div class="list">
            <h3>类型组合满意度</h3>
            <ul id="genre-combo"></ul>
        </div>
    </div>
</section>

<section>
    <div class="flex">
        <div class="list">
            <h3>观影节奏摘要</h3>
            <ul id="time-summary"></ul>
        </div>
        <div class="list">
            <h3>评论热度</h3>
            <ul id="comments-stats"></ul>
        </div>
        <div class="list">
            <h3>情感倾向</h3>
            <ul id="comments-sentiment"></ul>
        </div>
    </div>
</section>

<!-- 引入按功能拆分的脚本 -->
<script src="scripts/analysis-utils.js"></script>
<script src="scripts/analysis-renderers.js"></script>
<script src="scripts/analysis-filters.js"></script>
<script src="scripts/analysis-main.js"></script>
</body>
</html>
